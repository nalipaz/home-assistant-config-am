automation:
  - alias: Keypad switch turned on
    trigger:
      - platform: state
        to: 'on'
        entity_id:
          - input_boolean.door_keypad_1_front_switch
          - input_boolean.door_keypad_2_front_switch
          - input_boolean.door_keypad_3_front_switch
          - input_boolean.door_keypad_4_front_switch
          - input_boolean.door_keypad_5_front_switch
          - input_boolean.door_keypad_6_front_switch
          - input_boolean.door_keypad_7_front_switch
          - input_boolean.door_keypad_8_front_switch
          - input_boolean.door_keypad_9_front_switch
          - input_boolean.door_keypad_10_front_switch
          - input_boolean.door_keypad_11_front_switch
          - input_boolean.door_keypad_12_front_switch
          - input_boolean.door_keypad_13_front_switch
          - input_boolean.door_keypad_14_front_switch
          - input_boolean.door_keypad_15_front_switch
          - input_boolean.door_keypad_16_front_switch
          - input_boolean.door_keypad_17_front_switch
          - input_boolean.door_keypad_18_front_switch
          - input_boolean.door_keypad_19_front_switch
          - input_boolean.door_keypad_20_front_switch
          - input_boolean.door_keypad_21_front_switch
          - input_boolean.door_keypad_22_front_switch
          - input_boolean.door_keypad_23_front_switch
          - input_boolean.door_keypad_24_front_switch
          - input_boolean.door_keypad_25_front_switch
          - input_boolean.door_keypad_26_front_switch
          - input_boolean.door_keypad_27_front_switch
          - input_boolean.door_keypad_28_front_switch
          - input_boolean.door_keypad_29_front_switch
          - input_boolean.door_keypad_30_front_switch
          - input_boolean.door_keypad_1_rear_switch
          - input_boolean.door_keypad_2_rear_switch
          - input_boolean.door_keypad_3_rear_switch
          - input_boolean.door_keypad_4_rear_switch
          - input_boolean.door_keypad_5_rear_switch
          - input_boolean.door_keypad_6_rear_switch
          - input_boolean.door_keypad_7_rear_switch
          - input_boolean.door_keypad_8_rear_switch
          - input_boolean.door_keypad_9_rear_switch
          - input_boolean.door_keypad_10_rear_switch
          - input_boolean.door_keypad_11_rear_switch
          - input_boolean.door_keypad_12_rear_switch
          - input_boolean.door_keypad_13_rear_switch
          - input_boolean.door_keypad_14_rear_switch
          - input_boolean.door_keypad_15_rear_switch
          - input_boolean.door_keypad_16_rear_switch
          - input_boolean.door_keypad_17_rear_switch
          - input_boolean.door_keypad_18_rear_switch
          - input_boolean.door_keypad_19_rear_switch
          - input_boolean.door_keypad_20_rear_switch
          - input_boolean.door_keypad_21_rear_switch
          - input_boolean.door_keypad_22_rear_switch
          - input_boolean.door_keypad_23_rear_switch
          - input_boolean.door_keypad_24_rear_switch
          - input_boolean.door_keypad_25_rear_switch
          - input_boolean.door_keypad_26_rear_switch
          - input_boolean.door_keypad_27_rear_switch
          - input_boolean.door_keypad_28_rear_switch
          - input_boolean.door_keypad_29_rear_switch
          - input_boolean.door_keypad_30_rear_switch
          - input_boolean.door_keypad_1_garageside_switch
          - input_boolean.door_keypad_2_garageside_switch
          - input_boolean.door_keypad_3_garageside_switch
          - input_boolean.door_keypad_4_garageside_switch
          - input_boolean.door_keypad_5_garageside_switch
          - input_boolean.door_keypad_6_garageside_switch
          - input_boolean.door_keypad_7_garageside_switch
          - input_boolean.door_keypad_8_garageside_switch
          - input_boolean.door_keypad_9_garageside_switch
          - input_boolean.door_keypad_10_garageside_switch
          - input_boolean.door_keypad_11_garageside_switch
          - input_boolean.door_keypad_12_garageside_switch
          - input_boolean.door_keypad_13_garageside_switch
          - input_boolean.door_keypad_14_garageside_switch
          - input_boolean.door_keypad_15_garageside_switch
          - input_boolean.door_keypad_16_garageside_switch
          - input_boolean.door_keypad_17_garageside_switch
          - input_boolean.door_keypad_18_garageside_switch
          - input_boolean.door_keypad_19_garageside_switch
          - input_boolean.door_keypad_20_garageside_switch
          - input_boolean.door_keypad_21_garageside_switch
          - input_boolean.door_keypad_22_garageside_switch
          - input_boolean.door_keypad_23_garageside_switch
          - input_boolean.door_keypad_24_garageside_switch
          - input_boolean.door_keypad_25_garageside_switch
          - input_boolean.door_keypad_26_garageside_switch
          - input_boolean.door_keypad_27_garageside_switch
          - input_boolean.door_keypad_28_garageside_switch
          - input_boolean.door_keypad_29_garageside_switch
          - input_boolean.door_keypad_30_garageside_switch
          - input_boolean.door_keypad_1_4thbedroom_switch
          - input_boolean.door_keypad_2_4thbedroom_switch
          - input_boolean.door_keypad_3_4thbedroom_switch
          - input_boolean.door_keypad_4_4thbedroom_switch
          - input_boolean.door_keypad_5_4thbedroom_switch
          - input_boolean.door_keypad_6_4thbedroom_switch
          - input_boolean.door_keypad_7_4thbedroom_switch
          - input_boolean.door_keypad_8_4thbedroom_switch
          - input_boolean.door_keypad_9_4thbedroom_switch
          - input_boolean.door_keypad_10_4thbedroom_switch
          - input_boolean.door_keypad_11_4thbedroom_switch
          - input_boolean.door_keypad_12_4thbedroom_switch
          - input_boolean.door_keypad_13_4thbedroom_switch
          - input_boolean.door_keypad_14_4thbedroom_switch
          - input_boolean.door_keypad_15_4thbedroom_switch
          - input_boolean.door_keypad_16_4thbedroom_switch
          - input_boolean.door_keypad_17_4thbedroom_switch
          - input_boolean.door_keypad_18_4thbedroom_switch
          - input_boolean.door_keypad_19_4thbedroom_switch
          - input_boolean.door_keypad_20_4thbedroom_switch
          - input_boolean.door_keypad_21_4thbedroom_switch
          - input_boolean.door_keypad_22_4thbedroom_switch
          - input_boolean.door_keypad_23_4thbedroom_switch
          - input_boolean.door_keypad_24_4thbedroom_switch
          - input_boolean.door_keypad_25_4thbedroom_switch
          - input_boolean.door_keypad_26_4thbedroom_switch
          - input_boolean.door_keypad_27_4thbedroom_switch
          - input_boolean.door_keypad_28_4thbedroom_switch
          - input_boolean.door_keypad_29_4thbedroom_switch
          - input_boolean.door_keypad_30_4thbedroom_switch
    condition:
      - condition: and
        conditions:
          - condition: template
            value_template: >-
              {% set object_id = trigger.to_state.object_id %}
              {% set code_slot = "_".join(object_id.split("_")[2:-2]) %}
              {% set select_id = 'door_keypad_' ~ code_slot ~ '_access_schedule' %}
              {{ states['input_select'][select_id].state == 'Always' }}

    action:
      - service: lock.set_usercode
        data_template:
          node_id: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set lock_name = "_".join(object_id.split("_")[3:-1]) %}
            {% set lock_id = 'lock_' ~ lock_name ~ '_door_locked' %}
            {{ states['lock'][lock_id].attributes.node_id }}
            
          code_slot: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = "_".join(object_id.split("_")[2:-2]) %}
            {{ code_slot | int }}

          usercode: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = "_".join(object_id.split("_")[2:-2]) %}
            {% set user_code_id = 'door_keypad_' ~ code_slot ~ '_code' %}
            {{ states['input_text'][user_code_id].state }}

  - alias: Keypad switch turned off
    trigger:
      - platform: state
        to: 'off'
        entity_id:
          - input_boolean.door_keypad_1_front_switch
          - input_boolean.door_keypad_2_front_switch
          - input_boolean.door_keypad_3_front_switch
          - input_boolean.door_keypad_4_front_switch
          - input_boolean.door_keypad_5_front_switch
          - input_boolean.door_keypad_6_front_switch
          - input_boolean.door_keypad_7_front_switch
          - input_boolean.door_keypad_8_front_switch
          - input_boolean.door_keypad_9_front_switch
          - input_boolean.door_keypad_10_front_switch
          - input_boolean.door_keypad_11_front_switch
          - input_boolean.door_keypad_12_front_switch
          - input_boolean.door_keypad_13_front_switch
          - input_boolean.door_keypad_14_front_switch
          - input_boolean.door_keypad_15_front_switch
          - input_boolean.door_keypad_16_front_switch
          - input_boolean.door_keypad_17_front_switch
          - input_boolean.door_keypad_18_front_switch
          - input_boolean.door_keypad_19_front_switch
          - input_boolean.door_keypad_20_front_switch
          - input_boolean.door_keypad_21_front_switch
          - input_boolean.door_keypad_22_front_switch
          - input_boolean.door_keypad_23_front_switch
          - input_boolean.door_keypad_24_front_switch
          - input_boolean.door_keypad_25_front_switch
          - input_boolean.door_keypad_26_front_switch
          - input_boolean.door_keypad_27_front_switch
          - input_boolean.door_keypad_28_front_switch
          - input_boolean.door_keypad_29_front_switch
          - input_boolean.door_keypad_30_front_switch
          - input_boolean.door_keypad_1_rear_switch
          - input_boolean.door_keypad_2_rear_switch
          - input_boolean.door_keypad_3_rear_switch
          - input_boolean.door_keypad_4_rear_switch
          - input_boolean.door_keypad_5_rear_switch
          - input_boolean.door_keypad_6_rear_switch
          - input_boolean.door_keypad_7_rear_switch
          - input_boolean.door_keypad_8_rear_switch
          - input_boolean.door_keypad_9_rear_switch
          - input_boolean.door_keypad_10_rear_switch
          - input_boolean.door_keypad_11_rear_switch
          - input_boolean.door_keypad_12_rear_switch
          - input_boolean.door_keypad_13_rear_switch
          - input_boolean.door_keypad_14_rear_switch
          - input_boolean.door_keypad_15_rear_switch
          - input_boolean.door_keypad_16_rear_switch
          - input_boolean.door_keypad_17_rear_switch
          - input_boolean.door_keypad_18_rear_switch
          - input_boolean.door_keypad_19_rear_switch
          - input_boolean.door_keypad_20_rear_switch
          - input_boolean.door_keypad_21_rear_switch
          - input_boolean.door_keypad_22_rear_switch
          - input_boolean.door_keypad_23_rear_switch
          - input_boolean.door_keypad_24_rear_switch
          - input_boolean.door_keypad_25_rear_switch
          - input_boolean.door_keypad_26_rear_switch
          - input_boolean.door_keypad_27_rear_switch
          - input_boolean.door_keypad_28_rear_switch
          - input_boolean.door_keypad_29_rear_switch
          - input_boolean.door_keypad_30_rear_switch
          - input_boolean.door_keypad_1_garageside_switch
          - input_boolean.door_keypad_2_garageside_switch
          - input_boolean.door_keypad_3_garageside_switch
          - input_boolean.door_keypad_4_garageside_switch
          - input_boolean.door_keypad_5_garageside_switch
          - input_boolean.door_keypad_6_garageside_switch
          - input_boolean.door_keypad_7_garageside_switch
          - input_boolean.door_keypad_8_garageside_switch
          - input_boolean.door_keypad_9_garageside_switch
          - input_boolean.door_keypad_10_garageside_switch
          - input_boolean.door_keypad_11_garageside_switch
          - input_boolean.door_keypad_12_garageside_switch
          - input_boolean.door_keypad_13_garageside_switch
          - input_boolean.door_keypad_14_garageside_switch
          - input_boolean.door_keypad_15_garageside_switch
          - input_boolean.door_keypad_16_garageside_switch
          - input_boolean.door_keypad_17_garageside_switch
          - input_boolean.door_keypad_18_garageside_switch
          - input_boolean.door_keypad_19_garageside_switch
          - input_boolean.door_keypad_20_garageside_switch
          - input_boolean.door_keypad_21_garageside_switch
          - input_boolean.door_keypad_22_garageside_switch
          - input_boolean.door_keypad_23_garageside_switch
          - input_boolean.door_keypad_24_garageside_switch
          - input_boolean.door_keypad_25_garageside_switch
          - input_boolean.door_keypad_26_garageside_switch
          - input_boolean.door_keypad_27_garageside_switch
          - input_boolean.door_keypad_28_garageside_switch
          - input_boolean.door_keypad_29_garageside_switch
          - input_boolean.door_keypad_30_garageside_switch
          - input_boolean.door_keypad_1_4thbedroom_switch
          - input_boolean.door_keypad_2_4thbedroom_switch
          - input_boolean.door_keypad_3_4thbedroom_switch
          - input_boolean.door_keypad_4_4thbedroom_switch
          - input_boolean.door_keypad_5_4thbedroom_switch
          - input_boolean.door_keypad_6_4thbedroom_switch
          - input_boolean.door_keypad_7_4thbedroom_switch
          - input_boolean.door_keypad_8_4thbedroom_switch
          - input_boolean.door_keypad_9_4thbedroom_switch
          - input_boolean.door_keypad_10_4thbedroom_switch
          - input_boolean.door_keypad_11_4thbedroom_switch
          - input_boolean.door_keypad_12_4thbedroom_switch
          - input_boolean.door_keypad_13_4thbedroom_switch
          - input_boolean.door_keypad_14_4thbedroom_switch
          - input_boolean.door_keypad_15_4thbedroom_switch
          - input_boolean.door_keypad_16_4thbedroom_switch
          - input_boolean.door_keypad_17_4thbedroom_switch
          - input_boolean.door_keypad_18_4thbedroom_switch
          - input_boolean.door_keypad_19_4thbedroom_switch
          - input_boolean.door_keypad_20_4thbedroom_switch
          - input_boolean.door_keypad_21_4thbedroom_switch
          - input_boolean.door_keypad_22_4thbedroom_switch
          - input_boolean.door_keypad_23_4thbedroom_switch
          - input_boolean.door_keypad_24_4thbedroom_switch
          - input_boolean.door_keypad_25_4thbedroom_switch
          - input_boolean.door_keypad_26_4thbedroom_switch
          - input_boolean.door_keypad_27_4thbedroom_switch
          - input_boolean.door_keypad_28_4thbedroom_switch
          - input_boolean.door_keypad_29_4thbedroom_switch
          - input_boolean.door_keypad_30_4thbedroom_switch
    condition:
      - condition: and
        conditions:
          - condition: template
            value_template: >-
              {% set object_id = trigger.to_state.object_id %}
              {% set code_slot = "_".join(object_id.split("_")[2:-2]) %}
              {% set select_id = 'door_keypad_' ~ code_slot ~ '_access_schedule' %}
              {{ states['input_select'][select_id].state == 'Always' }}

    action:
      - service: lock.set_usercode
        data_template:
          usercode: '0000'
          node_id: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set lock_name = "_".join(object_id.split("_")[3:-1]) %}
            {% set lock_id = 'lock_' ~ lock_name ~ '_door_locked' %}
            {{ states['lock'][lock_id].attributes.node_id }}

          code_slot: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = "_".join(object_id.split("_")[2:-2]) %}
            {{ code_slot }}

  - alias: Keypad temporary code start (front)
    trigger:
      - platform: state
        to: 'True'
        entity_id:
          - sensor.keypad_1_temp_lock_turn_on
          - sensor.keypad_2_temp_lock_turn_on
          - sensor.keypad_3_temp_lock_turn_on
          - sensor.keypad_4_temp_lock_turn_on
          - sensor.keypad_5_temp_lock_turn_on
          - sensor.keypad_6_temp_lock_turn_on
          - sensor.keypad_7_temp_lock_turn_on
          - sensor.keypad_8_temp_lock_turn_on
          - sensor.keypad_9_temp_lock_turn_on
          - sensor.keypad_10_temp_lock_turn_on
          - sensor.keypad_11_temp_lock_turn_on
          - sensor.keypad_12_temp_lock_turn_on
          - sensor.keypad_13_temp_lock_turn_on
          - sensor.keypad_14_temp_lock_turn_on
          - sensor.keypad_15_temp_lock_turn_on
          - sensor.keypad_16_temp_lock_turn_on
          - sensor.keypad_17_temp_lock_turn_on
          - sensor.keypad_18_temp_lock_turn_on
          - sensor.keypad_19_temp_lock_turn_on
          - sensor.keypad_20_temp_lock_turn_on
          - sensor.keypad_21_temp_lock_turn_on
          - sensor.keypad_22_temp_lock_turn_on
          - sensor.keypad_23_temp_lock_turn_on
          - sensor.keypad_24_temp_lock_turn_on
          - sensor.keypad_25_temp_lock_turn_on
          - sensor.keypad_26_temp_lock_turn_on
          - sensor.keypad_27_temp_lock_turn_on
          - sensor.keypad_28_temp_lock_turn_on
          - sensor.keypad_29_temp_lock_turn_on
          - sensor.keypad_30_temp_lock_turn_on

    condition:
      - condition: and
        conditions:
          - condition: template
            value_template: >-
              {% set object_id = trigger.to_state.object_id %}
              {% set code_slot = object_id[7:-18] %}
              {% set input = 'door_keypad_' ~ code_slot ~ '_front_switch' %}
              {{ states['input_boolean'][input].state == 'on' }}

    action:
      - service: lock.set_usercode
        data_template:
          usercode: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {% set input = 'door_keypad_' ~ code_slot ~ '_code' %}
            {{ states['input_text'][input].state }}

          node_id: >-
            {{ states['lock']['lock_front_door_locked'].attributes.node_id }}

          code_slot: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {{ code_slot }}

  - alias: Keypad temporary code start (rear)
    trigger:
      - platform: state
        to: 'True'
        entity_id:
          - sensor.keypad_1_temp_lock_turn_on
          - sensor.keypad_2_temp_lock_turn_on
          - sensor.keypad_3_temp_lock_turn_on
          - sensor.keypad_4_temp_lock_turn_on
          - sensor.keypad_5_temp_lock_turn_on
          - sensor.keypad_6_temp_lock_turn_on
          - sensor.keypad_7_temp_lock_turn_on
          - sensor.keypad_8_temp_lock_turn_on
          - sensor.keypad_9_temp_lock_turn_on
          - sensor.keypad_10_temp_lock_turn_on
          - sensor.keypad_11_temp_lock_turn_on
          - sensor.keypad_12_temp_lock_turn_on
          - sensor.keypad_13_temp_lock_turn_on
          - sensor.keypad_14_temp_lock_turn_on
          - sensor.keypad_15_temp_lock_turn_on
          - sensor.keypad_16_temp_lock_turn_on
          - sensor.keypad_17_temp_lock_turn_on
          - sensor.keypad_18_temp_lock_turn_on
          - sensor.keypad_19_temp_lock_turn_on
          - sensor.keypad_20_temp_lock_turn_on
          - sensor.keypad_21_temp_lock_turn_on
          - sensor.keypad_22_temp_lock_turn_on
          - sensor.keypad_23_temp_lock_turn_on
          - sensor.keypad_24_temp_lock_turn_on
          - sensor.keypad_25_temp_lock_turn_on
          - sensor.keypad_26_temp_lock_turn_on
          - sensor.keypad_27_temp_lock_turn_on
          - sensor.keypad_28_temp_lock_turn_on
          - sensor.keypad_29_temp_lock_turn_on
          - sensor.keypad_30_temp_lock_turn_on

    condition:
      - condition: and
        conditions:
          - condition: template
            value_template: >-
              {% set object_id = trigger.to_state.object_id %}
              {% set code_slot = object_id[7:-18] %}
              {% set input = 'door_keypad_' ~ code_slot ~ '_rear_switch' %}
              {{ states['input_boolean'][input].state == 'on' }}

    action:
      - service: lock.set_usercode
        data_template:
          usercode: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {% set input = 'door_keypad_' ~ code_slot ~ '_code' %}
            {{ states['input_text'][input].state }}

          node_id: >-
            {{ states['lock']['lock_rear_door_locked'].attributes.node_id }}

          code_slot: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {{ code_slot }}

      - service: notify.html5
        data_template:
          message: "new code turned on rear"
          title: "Maravilla: New code started"
          data:
            requireInteraction: True
            tag: "rear"
            timestamp: "{{ as_timestamp(now()) | int }}"

  - alias: Keypad temporary code start (4th bedroom)
    trigger:
      - platform: state
        to: 'True'
        entity_id:
          - sensor.keypad_1_temp_lock_turn_on
          - sensor.keypad_2_temp_lock_turn_on
          - sensor.keypad_3_temp_lock_turn_on
          - sensor.keypad_4_temp_lock_turn_on
          - sensor.keypad_5_temp_lock_turn_on
          - sensor.keypad_6_temp_lock_turn_on
          - sensor.keypad_7_temp_lock_turn_on
          - sensor.keypad_8_temp_lock_turn_on
          - sensor.keypad_9_temp_lock_turn_on
          - sensor.keypad_10_temp_lock_turn_on
          - sensor.keypad_11_temp_lock_turn_on
          - sensor.keypad_12_temp_lock_turn_on
          - sensor.keypad_13_temp_lock_turn_on
          - sensor.keypad_14_temp_lock_turn_on
          - sensor.keypad_15_temp_lock_turn_on
          - sensor.keypad_16_temp_lock_turn_on
          - sensor.keypad_17_temp_lock_turn_on
          - sensor.keypad_18_temp_lock_turn_on
          - sensor.keypad_19_temp_lock_turn_on
          - sensor.keypad_20_temp_lock_turn_on
          - sensor.keypad_21_temp_lock_turn_on
          - sensor.keypad_22_temp_lock_turn_on
          - sensor.keypad_23_temp_lock_turn_on
          - sensor.keypad_24_temp_lock_turn_on
          - sensor.keypad_25_temp_lock_turn_on
          - sensor.keypad_26_temp_lock_turn_on
          - sensor.keypad_27_temp_lock_turn_on
          - sensor.keypad_28_temp_lock_turn_on
          - sensor.keypad_29_temp_lock_turn_on
          - sensor.keypad_30_temp_lock_turn_on

    condition:
      - condition: and
        conditions:
          - condition: template
            value_template: >-
              {% set object_id = trigger.to_state.object_id %}
              {% set code_slot = object_id[7:-18] %}
              {% set input = 'door_keypad_' ~ code_slot ~ '_4thbedroom_switch' %}
              {{ states['input_boolean'][input].state == 'on' }}

    action:
      - service: lock.set_usercode
        data_template:
          usercode: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {% set input = 'door_keypad_' ~ code_slot ~ '_code' %}
            {{ states['input_text'][input].state }}

          node_id: >-
            {{ states['lock']['lock_4thbedroom_door_locked'].attributes.node_id }}

          code_slot: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {{ code_slot }}

  - alias: Keypad temporary code start (garage side)
    trigger:
      - platform: state
        to: 'True'
        entity_id:
          - sensor.keypad_1_temp_lock_turn_on
          - sensor.keypad_2_temp_lock_turn_on
          - sensor.keypad_3_temp_lock_turn_on
          - sensor.keypad_4_temp_lock_turn_on
          - sensor.keypad_5_temp_lock_turn_on
          - sensor.keypad_6_temp_lock_turn_on
          - sensor.keypad_7_temp_lock_turn_on
          - sensor.keypad_8_temp_lock_turn_on
          - sensor.keypad_9_temp_lock_turn_on
          - sensor.keypad_10_temp_lock_turn_on
          - sensor.keypad_11_temp_lock_turn_on
          - sensor.keypad_12_temp_lock_turn_on
          - sensor.keypad_13_temp_lock_turn_on
          - sensor.keypad_14_temp_lock_turn_on
          - sensor.keypad_15_temp_lock_turn_on
          - sensor.keypad_16_temp_lock_turn_on
          - sensor.keypad_17_temp_lock_turn_on
          - sensor.keypad_18_temp_lock_turn_on
          - sensor.keypad_19_temp_lock_turn_on
          - sensor.keypad_20_temp_lock_turn_on
          - sensor.keypad_21_temp_lock_turn_on
          - sensor.keypad_22_temp_lock_turn_on
          - sensor.keypad_23_temp_lock_turn_on
          - sensor.keypad_24_temp_lock_turn_on
          - sensor.keypad_25_temp_lock_turn_on
          - sensor.keypad_26_temp_lock_turn_on
          - sensor.keypad_27_temp_lock_turn_on
          - sensor.keypad_28_temp_lock_turn_on
          - sensor.keypad_29_temp_lock_turn_on
          - sensor.keypad_30_temp_lock_turn_on

    condition:
      - condition: and
        conditions:
          - condition: template
            value_template: >-
              {% set object_id = trigger.to_state.object_id %}
              {% set code_slot = object_id[7:-18] %}
              {% set input = 'door_keypad_' ~ code_slot ~ '_garageside_switch' %}
              {{ states['input_boolean'][input].state == 'on' }}

    action:
      - service: lock.set_usercode
        data_template:
          usercode: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {% set input = 'door_keypad_' ~ code_slot ~ '_code' %}
            {{ states['input_text'][input].state }}

          node_id: >-
            {{ states['lock']['lock_garageside_door_locked'].attributes.node_id }}

          code_slot: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-18] %}
            {{ code_slot }}

  - alias: Keypad temporary code end
    trigger:
      - platform: state
        to: 'True'
        entity_id:
          - sensor.keypad_1_temp_lock_turn_off
          - sensor.keypad_2_temp_lock_turn_off
          - sensor.keypad_3_temp_lock_turn_off
          - sensor.keypad_4_temp_lock_turn_off
          - sensor.keypad_5_temp_lock_turn_off
          - sensor.keypad_6_temp_lock_turn_off
          - sensor.keypad_7_temp_lock_turn_off
          - sensor.keypad_8_temp_lock_turn_off
          - sensor.keypad_9_temp_lock_turn_off
          - sensor.keypad_10_temp_lock_turn_off
          - sensor.keypad_11_temp_lock_turn_off
          - sensor.keypad_12_temp_lock_turn_off
          - sensor.keypad_13_temp_lock_turn_off
          - sensor.keypad_14_temp_lock_turn_off
          - sensor.keypad_15_temp_lock_turn_off
          - sensor.keypad_16_temp_lock_turn_off
          - sensor.keypad_17_temp_lock_turn_off
          - sensor.keypad_18_temp_lock_turn_off
          - sensor.keypad_19_temp_lock_turn_off
          - sensor.keypad_20_temp_lock_turn_off
          - sensor.keypad_21_temp_lock_turn_off
          - sensor.keypad_22_temp_lock_turn_off
          - sensor.keypad_23_temp_lock_turn_off
          - sensor.keypad_24_temp_lock_turn_off
          - sensor.keypad_25_temp_lock_turn_off
          - sensor.keypad_26_temp_lock_turn_off
          - sensor.keypad_27_temp_lock_turn_off
          - sensor.keypad_28_temp_lock_turn_off
          - sensor.keypad_29_temp_lock_turn_off
          - sensor.keypad_30_temp_lock_turn_off

    action:
      - service: script.turn_on
        data_template:
          entity_id: >-
            {% set object_id = trigger.to_state.object_id %}
            {% set code_slot = object_id[7:-19] %}
            {{ 'script.door_keypad_' ~ code_slot ~ '_delete' }}


#
#  - alias: 1BR Airbnb reservation starts
#    trigger:
#      - platform: state
#        to: 'on'
#        entity_id:
#          - calendar.airbnb_1br
#        for:
#          hours: 14
#          minutes: 30
#          seconds: 0
#    action:
#      - service: input_text.set_value
#        data_template:
#          entity_id: 'input_text.door_keypad_21_code'
#          code_slot: '31'
#          usercode: >-
#            {% set desc = trigger.attributes.description %}
#            {% set phone_line = " ".join(desc.split("\n")[3:-3]) | replace(" ", "") | replace("-", "") | replace("(", "") | replace(")", "") %}
#            {% set last_four = phone_line[-4:] %}
#            {{ last_four }}
#
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_31_rear_switch'
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_31_garageside_switch'
#
#  - alias: 1BR Airbnb reservation ends
#    trigger:
#      - platform: state
#        to: 'off'
#        entity_id:
#          - calendar.airbnb_1br
#        for:
#          hours: 12
#          minutes: 30
#          seconds: 0
#    action:
#      - service: input_boolean.turn_off
#        data:
#          entity_id: 'input_boolean.door_keypad_31_rear_switch'
#      - service: input_boolean.turn_off
#        data:
#          entity_id: 'input_boolean.door_keypad_31_garageside_switch'
#
#  - alias: 3BR Airbnb reservation starts
#    trigger:
#      - platform: state
#        to: 'on'
#        entity_id:
#          - calendar.airbnb_3br
#        for:
#          hours: 14
#          minutes: 30
#          seconds: 0
#    action:
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_32_front_switch'
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_32_garageside_switch'
#
#  - alias: 3BR Airbnb reservation ends
#    trigger:
#      - platform: state
#        to: 'off'
#        entity_id:
#          - calendar.airbnb_3br
#        for:
#          hours: 12
#          minutes: 30
#          seconds: 0
#    action:
#      - service: input_boolean.turn_off
#        data:
#          entity_id: 'input_boolean.door_keypad_32_front_switch'
#      - service: input_boolean.turn_off
#        data:
#          entity_id: 'input_boolean.door_keypad_32_garageside_switch'
#
#  - alias: 4BR Airbnb reservation starts
#    trigger:
#      - platform: state
#        to: 'on'
#        entity_id:
#          - calendar.airbnb_4br
#        for:
#          hours: 14
#          minutes: 30
#          seconds: 0
#    action:
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_33_front_switch'
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_33_garageside_switch'
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_33_4thbedroom_switch'
#      - service: input_boolean.turn_on
#        data:
#          entity_id: 'input_boolean.door_keypad_33_rear_switch'
#      - service: lock.unlock
#        data:
#          entity_id: 'lock.lock_4thbedroom_door_locked'
#
#  - alias: 4BR Airbnb reservation ends
#    trigger:
#      - platform: state
#        to: 'off'
#        entity_id:
#          - calendar.airbnb_4br
#        for:
#          hours: 12
#          minutes: 30
#          seconds: 0
#    action:
#      - service: input_boolean.turn_off
#        data:
#          entity_id: 'input_boolean.door_keypad_33_front_switch'
#      - service: input_boolean.turn_off
#        data:
#          entity_id: 'input_boolean.door_keypad_33_garageside_switch'


group:
  keypads:
    name: Personal Entry Codes
    view: yes
    icon: mdi:dialpad
    entities:
      - group.door_keypad_1
      - group.door_keypad_2
      - group.door_keypad_3
      - group.door_keypad_4
      - group.door_keypad_5
      - group.door_keypad_6
      - group.door_keypad_7
      - group.door_keypad_8
      - group.door_keypad_9
      - group.door_keypad_10

  keypads_maids:
    name: Maid Entry Codes
    view: yes
    icon: mdi:basket-fill
    entities:
      - group.door_keypad_11
      - group.door_keypad_12
      - group.door_keypad_13
      - group.door_keypad_14
      - group.door_keypad_15
      - group.door_keypad_16
      - group.door_keypad_17
      - group.door_keypad_18
      - group.door_keypad_19
      - group.door_keypad_20

  keypads_airbnb:
    name: Airbnb Entry Codes
    view: yes
    icon: mdi:hotel
    entities:
      - group.door_keypad_21
      - group.door_keypad_22
      - group.door_keypad_23
      - group.door_keypad_24
      - group.door_keypad_25
      - group.door_keypad_26
      - group.door_keypad_27
      - group.door_keypad_28
      - group.door_keypad_29
      - group.door_keypad_30

  door_keypad_1:
    control: hidden
    name: Entry Code 1
    entities:
      - input_text.door_keypad_1_name
      - input_text.door_keypad_1_code
      - input_select.door_keypad_1_access_schedule
      - input_datetime.door_keypad_1_date_start
      - input_datetime.door_keypad_1_date_end
      - input_boolean.door_keypad_1_front_switch
      - input_boolean.door_keypad_1_rear_switch
      - input_boolean.door_keypad_1_garageside_switch
      - input_boolean.door_keypad_1_4thbedroom_switch
      - script.door_keypad_1_delete
  door_keypad_2:
    control: hidden
    name: Entry Code 2
    entities:
      - input_text.door_keypad_2_name
      - input_text.door_keypad_2_code
      - input_select.door_keypad_2_access_schedule
      - input_datetime.door_keypad_2_date_start
      - input_datetime.door_keypad_2_date_end
      - input_boolean.door_keypad_2_front_switch
      - input_boolean.door_keypad_2_rear_switch
      - input_boolean.door_keypad_2_garageside_switch
      - input_boolean.door_keypad_2_4thbedroom_switch
      - script.door_keypad_2_delete
  door_keypad_3:
    control: hidden
    name: Entry Code 3
    entities:
      - input_text.door_keypad_3_name
      - input_text.door_keypad_3_code
      - input_select.door_keypad_3_access_schedule
      - input_datetime.door_keypad_3_date_start
      - input_datetime.door_keypad_3_date_end
      - input_boolean.door_keypad_3_front_switch
      - input_boolean.door_keypad_3_rear_switch
      - input_boolean.door_keypad_3_garageside_switch
      - input_boolean.door_keypad_3_4thbedroom_switch
      - script.door_keypad_3_delete
  door_keypad_4:
    control: hidden
    name: Entry Code 4
    entities:
      - input_text.door_keypad_4_name
      - input_text.door_keypad_4_code
      - input_select.door_keypad_4_access_schedule
      - input_datetime.door_keypad_4_date_start
      - input_datetime.door_keypad_4_date_end
      - input_boolean.door_keypad_4_front_switch
      - input_boolean.door_keypad_4_rear_switch
      - input_boolean.door_keypad_4_garageside_switch
      - input_boolean.door_keypad_4_4thbedroom_switch
      - script.door_keypad_4_delete
  door_keypad_5:
    control: hidden
    name: Entry Code 5
    entities:
      - input_text.door_keypad_5_name
      - input_text.door_keypad_5_code
      - input_select.door_keypad_5_access_schedule
      - input_datetime.door_keypad_5_date_start
      - input_datetime.door_keypad_5_date_end
      - input_boolean.door_keypad_5_front_switch
      - input_boolean.door_keypad_5_rear_switch
      - input_boolean.door_keypad_5_garageside_switch
      - input_boolean.door_keypad_5_4thbedroom_switch
      - script.door_keypad_5_delete
  door_keypad_6:
    control: hidden
    name: Entry Code 6
    entities:
      - input_text.door_keypad_6_name
      - input_text.door_keypad_6_code
      - input_select.door_keypad_6_access_schedule
      - input_datetime.door_keypad_6_date_start
      - input_datetime.door_keypad_6_date_end
      - input_boolean.door_keypad_6_front_switch
      - input_boolean.door_keypad_6_rear_switch
      - input_boolean.door_keypad_6_garageside_switch
      - input_boolean.door_keypad_6_4thbedroom_switch
      - script.door_keypad_6_delete
  door_keypad_7:
    control: hidden
    name: Entry Code 7
    entities:
      - input_text.door_keypad_7_name
      - input_text.door_keypad_7_code
      - input_select.door_keypad_7_access_schedule
      - input_datetime.door_keypad_7_date_start
      - input_datetime.door_keypad_7_date_end
      - input_boolean.door_keypad_7_front_switch
      - input_boolean.door_keypad_7_rear_switch
      - input_boolean.door_keypad_7_garageside_switch
      - input_boolean.door_keypad_7_4thbedroom_switch
      - script.door_keypad_7_delete
  door_keypad_8:
    control: hidden
    name: Entry Code 8
    entities:
      - input_text.door_keypad_8_name
      - input_text.door_keypad_8_code
      - input_select.door_keypad_8_access_schedule
      - input_datetime.door_keypad_8_date_start
      - input_datetime.door_keypad_8_date_end
      - input_boolean.door_keypad_8_front_switch
      - input_boolean.door_keypad_8_rear_switch
      - input_boolean.door_keypad_8_garageside_switch
      - input_boolean.door_keypad_8_4thbedroom_switch
      - script.door_keypad_8_delete
  door_keypad_9:
    control: hidden
    name: Entry Code 9
    entities:
      - input_text.door_keypad_9_name
      - input_text.door_keypad_9_code
      - input_select.door_keypad_9_access_schedule
      - input_datetime.door_keypad_9_date_start
      - input_datetime.door_keypad_9_date_end
      - input_boolean.door_keypad_9_front_switch
      - input_boolean.door_keypad_9_rear_switch
      - input_boolean.door_keypad_9_garageside_switch
      - input_boolean.door_keypad_9_4thbedroom_switch
      - script.door_keypad_9_delete
  door_keypad_10:
    control: hidden
    name: Entry Code 10
    entities:
      - input_text.door_keypad_10_name
      - input_text.door_keypad_10_code
      - input_select.door_keypad_10_access_schedule
      - input_datetime.door_keypad_10_date_start
      - input_datetime.door_keypad_10_date_end
      - input_boolean.door_keypad_10_front_switch
      - input_boolean.door_keypad_10_rear_switch
      - input_boolean.door_keypad_10_garageside_switch
      - input_boolean.door_keypad_10_4thbedroom_switch
      - script.door_keypad_10_delete

  door_keypad_11:
    control: hidden
    name: Maid Entry Code 1
    entities:
      - input_text.door_keypad_11_name
      - input_text.door_keypad_11_code
      - input_select.door_keypad_11_access_schedule
      - input_datetime.door_keypad_11_date_start
      - input_datetime.door_keypad_11_date_end
      - input_boolean.door_keypad_11_front_switch
      - input_boolean.door_keypad_11_rear_switch
      - input_boolean.door_keypad_11_garageside_switch
      - input_boolean.door_keypad_11_4thbedroom_switch
      - script.door_keypad_11_delete
  door_keypad_12:
    control: hidden
    name: Maid Entry Code 2
    entities:
      - input_text.door_keypad_12_name
      - input_text.door_keypad_12_code
      - input_select.door_keypad_12_access_schedule
      - input_datetime.door_keypad_12_date_start
      - input_datetime.door_keypad_12_date_end
      - input_boolean.door_keypad_12_front_switch
      - input_boolean.door_keypad_12_rear_switch
      - input_boolean.door_keypad_12_garageside_switch
      - input_boolean.door_keypad_12_4thbedroom_switch
      - script.door_keypad_12_delete
  door_keypad_13:
    control: hidden
    name: Maid Entry Code 3
    entities:
      - input_text.door_keypad_13_name
      - input_text.door_keypad_13_code
      - input_select.door_keypad_13_access_schedule
      - input_datetime.door_keypad_13_date_start
      - input_datetime.door_keypad_13_date_end
      - input_boolean.door_keypad_13_front_switch
      - input_boolean.door_keypad_13_rear_switch
      - input_boolean.door_keypad_13_garageside_switch
      - input_boolean.door_keypad_13_4thbedroom_switch
      - script.door_keypad_13_delete
  door_keypad_14:
    control: hidden
    name: Maid Entry Code 4
    entities:
      - input_text.door_keypad_14_name
      - input_text.door_keypad_14_code
      - input_select.door_keypad_14_access_schedule
      - input_datetime.door_keypad_14_date_start
      - input_datetime.door_keypad_14_date_end
      - input_boolean.door_keypad_14_front_switch
      - input_boolean.door_keypad_14_rear_switch
      - input_boolean.door_keypad_14_garageside_switch
      - input_boolean.door_keypad_14_4thbedroom_switch
      - script.door_keypad_14_delete
  door_keypad_15:
    control: hidden
    name: Maid Entry Code 5
    entities:
      - input_text.door_keypad_15_name
      - input_text.door_keypad_15_code
      - input_select.door_keypad_15_access_schedule
      - input_datetime.door_keypad_15_date_start
      - input_datetime.door_keypad_15_date_end
      - input_boolean.door_keypad_15_front_switch
      - input_boolean.door_keypad_15_rear_switch
      - input_boolean.door_keypad_15_garageside_switch
      - input_boolean.door_keypad_15_4thbedroom_switch
      - script.door_keypad_15_delete
  door_keypad_16:
    control: hidden
    name: Maid Entry Code 6
    entities:
      - input_text.door_keypad_16_name
      - input_text.door_keypad_16_code
      - input_select.door_keypad_16_access_schedule
      - input_datetime.door_keypad_16_date_start
      - input_datetime.door_keypad_16_date_end
      - input_boolean.door_keypad_16_front_switch
      - input_boolean.door_keypad_16_rear_switch
      - input_boolean.door_keypad_16_garageside_switch
      - input_boolean.door_keypad_16_4thbedroom_switch
      - script.door_keypad_16_delete
  door_keypad_17:
    control: hidden
    name: Maid Entry Code 7
    entities:
      - input_text.door_keypad_17_name
      - input_text.door_keypad_17_code
      - input_select.door_keypad_17_access_schedule
      - input_datetime.door_keypad_17_date_start
      - input_datetime.door_keypad_17_date_end
      - input_boolean.door_keypad_17_front_switch
      - input_boolean.door_keypad_17_rear_switch
      - input_boolean.door_keypad_17_garageside_switch
      - input_boolean.door_keypad_17_4thbedroom_switch
      - script.door_keypad_17_delete
  door_keypad_18:
    control: hidden
    name: Maid Entry Code 8
    entities:
      - input_text.door_keypad_18_name
      - input_text.door_keypad_18_code
      - input_select.door_keypad_18_access_schedule
      - input_datetime.door_keypad_18_date_start
      - input_datetime.door_keypad_18_date_end
      - input_boolean.door_keypad_18_front_switch
      - input_boolean.door_keypad_18_rear_switch
      - input_boolean.door_keypad_18_garageside_switch
      - input_boolean.door_keypad_18_4thbedroom_switch
      - script.door_keypad_18_delete
  door_keypad_19:
    control: hidden
    name: Maid Entry Code 9
    entities:
      - input_text.door_keypad_19_name
      - input_text.door_keypad_19_code
      - input_select.door_keypad_19_access_schedule
      - input_datetime.door_keypad_19_date_start
      - input_datetime.door_keypad_19_date_end
      - input_boolean.door_keypad_19_front_switch
      - input_boolean.door_keypad_19_rear_switch
      - input_boolean.door_keypad_19_garageside_switch
      - input_boolean.door_keypad_19_4thbedroom_switch
      - script.door_keypad_19_delete
  door_keypad_20:
    control: hidden
    name: Maid Entry Code 10
    entities:
      - input_text.door_keypad_20_name
      - input_text.door_keypad_20_code
      - input_select.door_keypad_20_access_schedule
      - input_datetime.door_keypad_20_date_start
      - input_datetime.door_keypad_20_date_end
      - input_boolean.door_keypad_20_front_switch
      - input_boolean.door_keypad_20_rear_switch
      - input_boolean.door_keypad_20_garageside_switch
      - input_boolean.door_keypad_20_4thbedroom_switch
      - script.door_keypad_20_delete
  door_keypad_21:
    control: hidden
    name: Airbnb Entry Code 1
    entities:
      - input_text.door_keypad_21_name
      - input_text.door_keypad_21_code
      - input_select.door_keypad_21_access_schedule
      - input_datetime.door_keypad_21_date_start
      - input_datetime.door_keypad_21_date_end
      - input_boolean.door_keypad_21_front_switch
      - input_boolean.door_keypad_21_rear_switch
      - input_boolean.door_keypad_21_garageside_switch
      - input_boolean.door_keypad_21_4thbedroom_switch
      - script.door_keypad_21_delete
  door_keypad_22:
    control: hidden
    name: Airbnb Entry Code 2
    entities:
      - input_text.door_keypad_22_name
      - input_text.door_keypad_22_code
      - input_select.door_keypad_22_access_schedule
      - input_datetime.door_keypad_22_date_start
      - input_datetime.door_keypad_22_date_end
      - input_boolean.door_keypad_22_front_switch
      - input_boolean.door_keypad_22_rear_switch
      - input_boolean.door_keypad_22_garageside_switch
      - input_boolean.door_keypad_22_4thbedroom_switch
      - script.door_keypad_22_delete
  door_keypad_23:
    control: hidden
    name: Airbnb Entry Code 3
    entities:
      - input_text.door_keypad_23_name
      - input_text.door_keypad_23_code
      - input_select.door_keypad_23_access_schedule
      - input_datetime.door_keypad_23_date_start
      - input_datetime.door_keypad_23_date_end
      - input_boolean.door_keypad_23_front_switch
      - input_boolean.door_keypad_23_rear_switch
      - input_boolean.door_keypad_23_garageside_switch
      - input_boolean.door_keypad_23_4thbedroom_switch
      - script.door_keypad_23_delete
  door_keypad_24:
    control: hidden
    name: Airbnb Entry Code 4
    entities:
      - input_text.door_keypad_24_name
      - input_text.door_keypad_24_code
      - input_select.door_keypad_24_access_schedule
      - input_datetime.door_keypad_24_date_start
      - input_datetime.door_keypad_24_date_end
      - input_boolean.door_keypad_24_front_switch
      - input_boolean.door_keypad_24_rear_switch
      - input_boolean.door_keypad_24_garageside_switch
      - input_boolean.door_keypad_24_4thbedroom_switch
      - script.door_keypad_24_delete
  door_keypad_25:
    control: hidden
    name: Airbnb Entry Code 5
    entities:
      - input_text.door_keypad_25_name
      - input_text.door_keypad_25_code
      - input_select.door_keypad_25_access_schedule
      - input_datetime.door_keypad_25_date_start
      - input_datetime.door_keypad_25_date_end
      - input_boolean.door_keypad_25_front_switch
      - input_boolean.door_keypad_25_rear_switch
      - input_boolean.door_keypad_25_garageside_switch
      - input_boolean.door_keypad_25_4thbedroom_switch
      - script.door_keypad_25_delete
  door_keypad_26:
    control: hidden
    name: Airbnb Entry Code 6
    entities:
      - input_text.door_keypad_26_name
      - input_text.door_keypad_26_code
      - input_select.door_keypad_26_access_schedule
      - input_datetime.door_keypad_26_date_start
      - input_datetime.door_keypad_26_date_end
      - input_boolean.door_keypad_26_front_switch
      - input_boolean.door_keypad_26_rear_switch
      - input_boolean.door_keypad_26_garageside_switch
      - input_boolean.door_keypad_26_4thbedroom_switch
      - script.door_keypad_26_delete
  door_keypad_27:
    control: hidden
    name: Airbnb Entry Code 7
    entities:
      - input_text.door_keypad_27_name
      - input_text.door_keypad_27_code
      - input_select.door_keypad_27_access_schedule
      - input_datetime.door_keypad_27_date_start
      - input_datetime.door_keypad_27_date_end
      - input_boolean.door_keypad_27_front_switch
      - input_boolean.door_keypad_27_rear_switch
      - input_boolean.door_keypad_27_garageside_switch
      - input_boolean.door_keypad_27_4thbedroom_switch
      - script.door_keypad_27_delete
  door_keypad_28:
    control: hidden
    name: Airbnb Entry Code 8
    entities:
      - input_text.door_keypad_28_name
      - input_text.door_keypad_28_code
      - input_select.door_keypad_28_access_schedule
      - input_datetime.door_keypad_28_date_start
      - input_datetime.door_keypad_28_date_end
      - input_boolean.door_keypad_28_front_switch
      - input_boolean.door_keypad_28_rear_switch
      - input_boolean.door_keypad_28_garageside_switch
      - input_boolean.door_keypad_28_4thbedroom_switch
      - script.door_keypad_28_delete
  door_keypad_29:
    control: hidden
    name: Airbnb Entry Code 9
    entities:
      - input_text.door_keypad_29_name
      - input_text.door_keypad_29_code
      - input_select.door_keypad_29_access_schedule
      - input_datetime.door_keypad_29_date_start
      - input_datetime.door_keypad_29_date_end
      - input_boolean.door_keypad_29_front_switch
      - input_boolean.door_keypad_29_rear_switch
      - input_boolean.door_keypad_29_garageside_switch
      - input_boolean.door_keypad_29_4thbedroom_switch
      - script.door_keypad_29_delete
  door_keypad_30:
    control: hidden
    name: Airbnb Entry Code 10
    entities:
      - input_text.door_keypad_30_name
      - input_text.door_keypad_30_code
      - input_select.door_keypad_30_access_schedule
      - input_datetime.door_keypad_30_date_start
      - input_datetime.door_keypad_30_date_end
      - input_boolean.door_keypad_30_front_switch
      - input_boolean.door_keypad_30_rear_switch
      - input_boolean.door_keypad_30_garageside_switch
      - input_boolean.door_keypad_30_4thbedroom_switch
      - script.door_keypad_30_delete

input_text:
  door_keypad_1_name:
    name: Name
  door_keypad_1_code:
    name: Code
  door_keypad_2_name:
    name: Name
  door_keypad_2_code:
    name: Code
  door_keypad_3_name:
    name: Name
  door_keypad_3_code:
    name: Code
  door_keypad_4_name:
    name: Name
  door_keypad_4_code:
    name: Code
  door_keypad_5_name:
    name: Name
  door_keypad_5_code:
    name: Code
  door_keypad_6_name:
    name: Name
  door_keypad_6_code:
    name: Code
  door_keypad_7_name:
    name: Name
  door_keypad_7_code:
    name: Code
  door_keypad_8_name:
    name: Name
  door_keypad_8_code:
    name: Code
  door_keypad_9_name:
    name: Name
  door_keypad_9_code:
    name: Code
  door_keypad_10_name:
    name: Name
  door_keypad_10_code:
    name: Code
  door_keypad_11_name:
    name: Name
  door_keypad_11_code:
    name: Code
  door_keypad_12_name:
    name: Name
  door_keypad_12_code:
    name: Code
  door_keypad_13_name:
    name: Name
  door_keypad_13_code:
    name: Code
  door_keypad_14_name:
    name: Name
  door_keypad_14_code:
    name: Code
  door_keypad_15_name:
    name: Name
  door_keypad_15_code:
    name: Code
  door_keypad_16_name:
    name: Name
  door_keypad_16_code:
    name: Code
  door_keypad_17_name:
    name: Name
  door_keypad_17_code:
    name: Code
  door_keypad_18_name:
    name: Name
  door_keypad_18_code:
    name: Code
  door_keypad_19_name:
    name: Name
  door_keypad_19_code:
    name: Code
  door_keypad_20_name:
    name: Name
  door_keypad_20_code:
    name: Code
  door_keypad_21_name:
    name: Name
  door_keypad_21_code:
    name: Code
  door_keypad_22_name:
    name: Name
  door_keypad_22_code:
    name: Code
  door_keypad_23_name:
    name: Name
  door_keypad_23_code:
    name: Code
  door_keypad_24_name:
    name: Name
  door_keypad_24_code:
    name: Code
  door_keypad_25_name:
    name: Name
  door_keypad_25_code:
    name: Code
  door_keypad_26_name:
    name: Name
  door_keypad_26_code:
    name: Code
  door_keypad_27_name:
    name: Name
  door_keypad_27_code:
    name: Code
  door_keypad_28_name:
    name: Name
  door_keypad_28_code:
    name: Code
  door_keypad_29_name:
    name: Name
  door_keypad_29_code:
    name: Code
  door_keypad_30_name:
    name: Name
  door_keypad_30_code:
    name: Code

input_select:
  door_keypad_1_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_2_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_3_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_4_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_5_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_6_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_7_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_8_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_9_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_10_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_11_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_12_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_13_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_14_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_15_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_16_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_17_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_18_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_19_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_20_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_21_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_22_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_23_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_24_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_25_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_26_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_27_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_28_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_29_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary
  door_keypad_30_access_schedule:
    name: Access Schedule
    options:
      - Always
      - Recurring
      - Temporary

input_datetime:
  door_keypad_1_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_1_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_2_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_2_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_3_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_3_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_4_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_4_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_5_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_5_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_6_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_6_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_7_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_7_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_8_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_8_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_9_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_9_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_10_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_10_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_11_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_11_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_12_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_12_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_13_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_13_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_14_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_14_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_15_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_15_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_16_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_16_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_17_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_17_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_18_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_18_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_19_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_19_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_20_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_20_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_21_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_21_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_22_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_22_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_23_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_23_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_24_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_24_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_25_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_25_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_26_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_26_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_27_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_27_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_28_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_28_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_29_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_29_date_end:
    name: End Time
    has_date: true
    has_time: true
  door_keypad_30_date_start:
    name: Start Time
    has_date: true
    has_time: true
  door_keypad_30_date_end:
    name: End Time
    has_date: true
    has_time: true

input_boolean:
  door_keypad_1_front_switch:
    name: Front Door
  door_keypad_1_rear_switch:
    name: Rear Door
  door_keypad_1_garageside_switch:
    name: Garage Side Door
  door_keypad_1_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_2_front_switch:
    name: Front Door
  door_keypad_2_rear_switch:
    name: Rear Door
  door_keypad_2_garageside_switch:
    name: Garage Side Door
  door_keypad_2_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_3_front_switch:
    name: Front Door
  door_keypad_3_rear_switch:
    name: Rear Door
  door_keypad_3_garageside_switch:
    name: Garage Side Door
  door_keypad_3_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_4_front_switch:
    name: Front Door
  door_keypad_4_rear_switch:
    name: Rear Door
  door_keypad_4_garageside_switch:
    name: Garage Side Door
  door_keypad_4_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_5_front_switch:
    name: Front Door
  door_keypad_5_rear_switch:
    name: Rear Door
  door_keypad_5_garageside_switch:
    name: Garage Side Door
  door_keypad_5_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_6_front_switch:
    name: Front Door
  door_keypad_6_rear_switch:
    name: Rear Door
  door_keypad_6_garageside_switch:
    name: Garage Side Door
  door_keypad_6_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_7_front_switch:
    name: Front Door
  door_keypad_7_rear_switch:
    name: Rear Door
  door_keypad_7_garageside_switch:
    name: Garage Side Door
  door_keypad_7_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_8_front_switch:
    name: Front Door
  door_keypad_8_rear_switch:
    name: Rear Door
  door_keypad_8_garageside_switch:
    name: Garage Side Door
  door_keypad_8_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_9_front_switch:
    name: Front Door
  door_keypad_9_rear_switch:
    name: Rear Door
  door_keypad_9_garageside_switch:
    name: Garage Side Door
  door_keypad_9_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_10_front_switch:
    name: Front Door
  door_keypad_10_rear_switch:
    name: Rear Door
  door_keypad_10_garageside_switch:
    name: Garage Side Door
  door_keypad_10_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_11_front_switch:
    name: Front Door
  door_keypad_11_rear_switch:
    name: Rear Door
  door_keypad_11_garageside_switch:
    name: Garage Side Door
  door_keypad_11_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_12_front_switch:
    name: Front Door
  door_keypad_12_rear_switch:
    name: Rear Door
  door_keypad_12_garageside_switch:
    name: Garage Side Door
  door_keypad_12_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_13_front_switch:
    name: Front Door
  door_keypad_13_rear_switch:
    name: Rear Door
  door_keypad_13_garageside_switch:
    name: Garage Side Door
  door_keypad_13_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_14_front_switch:
    name: Front Door
  door_keypad_14_rear_switch:
    name: Rear Door
  door_keypad_14_garageside_switch:
    name: Garage Side Door
  door_keypad_14_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_15_front_switch:
    name: Front Door
  door_keypad_15_rear_switch:
    name: Rear Door
  door_keypad_15_garageside_switch:
    name: Garage Side Door
  door_keypad_15_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_16_front_switch:
    name: Front Door
  door_keypad_16_rear_switch:
    name: Rear Door
  door_keypad_16_garageside_switch:
    name: Garage Side Door
  door_keypad_16_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_17_front_switch:
    name: Front Door
  door_keypad_17_rear_switch:
    name: Rear Door
  door_keypad_17_garageside_switch:
    name: Garage Side Door
  door_keypad_17_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_18_front_switch:
    name: Front Door
  door_keypad_18_rear_switch:
    name: Rear Door
  door_keypad_18_garageside_switch:
    name: Garage Side Door
  door_keypad_18_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_19_front_switch:
    name: Front Door
  door_keypad_19_rear_switch:
    name: Rear Door
  door_keypad_19_garageside_switch:
    name: Garage Side Door
  door_keypad_19_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_20_front_switch:
    name: Front Door
  door_keypad_20_rear_switch:
    name: Rear Door
  door_keypad_20_garageside_switch:
    name: Garage Side Door
  door_keypad_20_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_21_front_switch:
    name: Front Door
  door_keypad_21_rear_switch:
    name: Rear Door
  door_keypad_21_garageside_switch:
    name: Garage Side Door
  door_keypad_21_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_22_front_switch:
    name: Front Door
  door_keypad_22_rear_switch:
    name: Rear Door
  door_keypad_22_garageside_switch:
    name: Garage Side Door
  door_keypad_22_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_23_front_switch:
    name: Front Door
  door_keypad_23_rear_switch:
    name: Rear Door
  door_keypad_23_garageside_switch:
    name: Garage Side Door
  door_keypad_23_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_24_front_switch:
    name: Front Door
  door_keypad_24_rear_switch:
    name: Rear Door
  door_keypad_24_garageside_switch:
    name: Garage Side Door
  door_keypad_24_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_25_front_switch:
    name: Front Door
  door_keypad_25_rear_switch:
    name: Rear Door
  door_keypad_25_garageside_switch:
    name: Garage Side Door
  door_keypad_25_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_26_front_switch:
    name: Front Door
  door_keypad_26_rear_switch:
    name: Rear Door
  door_keypad_26_garageside_switch:
    name: Garage Side Door
  door_keypad_26_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_27_front_switch:
    name: Front Door
  door_keypad_27_rear_switch:
    name: Rear Door
  door_keypad_27_garageside_switch:
    name: Garage Side Door
  door_keypad_27_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_28_front_switch:
    name: Front Door
  door_keypad_28_rear_switch:
    name: Rear Door
  door_keypad_28_garageside_switch:
    name: Garage Side Door
  door_keypad_28_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_29_front_switch:
    name: Front Door
  door_keypad_29_rear_switch:
    name: Rear Door
  door_keypad_29_garageside_switch:
    name: Garage Side Door
  door_keypad_29_4thbedroom_switch:
    name: 4th Bedroom Door
  door_keypad_30_front_switch:
    name: Front Door
  door_keypad_30_rear_switch:
    name: Rear Door
  door_keypad_30_garageside_switch:
    name: Garage Side Door
  door_keypad_30_4thbedroom_switch:
    name: 4th Bedroom Door


#script:
#  door_keypad_1_save:
#    alias: Save
#    sequence:
#      - service: lock.set_usercode
#        data:
#          node_id: 37
#          code_slot: 1
#        data_template:
#          usercode: "{{ states('input_text.door_keypad_1_code') }}"

script:
  door_keypad_1_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_1_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_1_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_1_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_1_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_1_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_1_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_1_4thbedroom_switch

  door_keypad_2_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_2_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_2_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_2_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_2_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_2_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_2_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_2_4thbedroom_switch

  door_keypad_3_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_3_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_3_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_3_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_3_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_3_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_3_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_3_4thbedroom_switch

  door_keypad_4_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_4_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_4_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_4_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_4_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_4_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_4_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_4_4thbedroom_switch

  door_keypad_5_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_5_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_5_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_5_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_5_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_5_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_5_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_5_4thbedroom_switch

  door_keypad_6_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_6_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_6_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_6_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_6_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_6_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_6_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_6_4thbedroom_switch

  door_keypad_7_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_7_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_7_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_7_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_7_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_7_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_7_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_7_4thbedroom_switch

  door_keypad_8_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_8_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_8_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_8_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_8_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_8_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_8_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_8_4thbedroom_switch

  door_keypad_9_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_9_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_9_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_9_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_9_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_9_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_9_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_9_4thbedroom_switch

  door_keypad_10_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_10_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_10_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_10_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_10_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_10_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_10_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_10_4thbedroom_switch

  door_keypad_11_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_11_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_11_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_11_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_11_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_11_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_11_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_11_4thbedroom_switch

  door_keypad_12_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_12_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_12_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_12_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_12_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_12_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_12_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_12_4thbedroom_switch

  door_keypad_13_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_13_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_13_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_13_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_13_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_13_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_13_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_13_4thbedroom_switch

  door_keypad_14_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_14_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_14_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_14_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_14_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_14_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_14_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_14_4thbedroom_switch

  door_keypad_15_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_15_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_15_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_15_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_15_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_15_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_15_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_15_4thbedroom_switch

  door_keypad_16_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_16_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_16_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_16_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_16_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_16_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_16_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_16_4thbedroom_switch

  door_keypad_17_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_17_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_17_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_17_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_17_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_17_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_17_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_17_4thbedroom_switch

  door_keypad_18_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_18_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_18_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_18_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_18_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_18_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_18_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_18_4thbedroom_switch

  door_keypad_19_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_19_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_19_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_19_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_19_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_19_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_19_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_19_4thbedroom_switch

  door_keypad_20_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_20_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_20_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_20_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_20_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_20_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_20_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_20_4thbedroom_switch

  door_keypad_21_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_21_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_21_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_21_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_21_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_21_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_21_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_21_4thbedroom_switch

  door_keypad_22_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_22_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_22_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_22_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_22_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_22_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_22_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_22_4thbedroom_switch

  door_keypad_23_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_23_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_23_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_23_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_23_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_23_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_23_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_23_4thbedroom_switch

  door_keypad_24_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_24_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_24_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_24_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_24_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_24_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_24_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_24_4thbedroom_switch

  door_keypad_25_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_25_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_25_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_25_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_25_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_25_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_25_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_25_4thbedroom_switch

  door_keypad_26_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_26_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_26_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_26_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_26_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_26_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_26_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_26_4thbedroom_switch

  door_keypad_27_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_27_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_27_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_27_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_27_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_27_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_27_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_27_4thbedroom_switch

  door_keypad_28_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_28_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_28_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_28_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_28_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_28_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_28_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_28_4thbedroom_switch

  door_keypad_29_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_29_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_29_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_29_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_29_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_29_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_29_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_29_4thbedroom_switch

  door_keypad_30_delete:
    alias: Delete
    sequence:
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_30_name
    - service: input_text.set_value
      data:
        value: ''
        entity_id: input_text.door_keypad_30_code
    - service: input_select.select_option
      data:
        option: 'Always'
        entity_id: input_select.door_keypad_30_access_schedule
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_30_front_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_30_rear_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_30_garageside_switch
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.door_keypad_30_4thbedroom_switch

#      - service: input_datetime.set_datetime
#        data_template:
#          date: ''
#          time: ''
#          entity_id: >-
#            {% set object_id = trigger.to_state.object_id %}
#            {% set lock_id = "_".join(object_id.split("_")[2:]) %}
#            {% set input_id = 'input_datetime.door_keypad_' ~ lock_id ~ '_date_start' %}
#            {{ input_id }}
#
#      - service: input_datetime.set_datetime
#        data_template:
#          date: ''
#          time: ''
#          entity_id: >-
#            {% set object_id = trigger.to_state.object_id %}
#            {% set lock_id = "_".join(object_id.split("_")[2:]) %}
#            {% set input_id = 'input_datetime.door_keypad_' ~ lock_id ~ '_date_end' %}
#            {{ input_id }}

sensor:
  - platform: template
    sensors:
      keypad_1_temp_lock_turn_on:
        friendly_name: Turn keypad 1 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_1_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_1_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_2_temp_lock_turn_on:
        friendly_name: Turn keypad 2 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_2_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_2_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_3_temp_lock_turn_on:
        friendly_name: Turn keypad 3 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_3_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_3_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_4_temp_lock_turn_on:
        friendly_name: Turn keypad 4 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_4_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_4_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_5_temp_lock_turn_on:
        friendly_name: Turn keypad 5 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_5_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_5_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_6_temp_lock_turn_on:
        friendly_name: Turn keypad 6 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_6_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_6_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_7_temp_lock_turn_on:
        friendly_name: Turn keypad 7 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_7_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_7_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_8_temp_lock_turn_on:
        friendly_name: Turn keypad 8 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_8_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_8_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_9_temp_lock_turn_on:
        friendly_name: Turn keypad 9 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_9_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_9_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_10_temp_lock_turn_on:
        friendly_name: Turn keypad 10 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_10_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_10_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_11_temp_lock_turn_on:
        friendly_name: Turn keypad 11 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_11_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_11_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_12_temp_lock_turn_on:
        friendly_name: Turn keypad 12 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_12_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_12_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_13_temp_lock_turn_on:
        friendly_name: Turn keypad 13 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_13_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_13_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_14_temp_lock_turn_on:
        friendly_name: Turn keypad 14 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_14_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_14_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_15_temp_lock_turn_on:
        friendly_name: Turn keypad 15 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_15_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_15_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_16_temp_lock_turn_on:
        friendly_name: Turn keypad 16 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_16_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_16_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_17_temp_lock_turn_on:
        friendly_name: Turn keypad 17 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_17_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_17_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_18_temp_lock_turn_on:
        friendly_name: Turn keypad 18 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_18_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_18_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_19_temp_lock_turn_on:
        friendly_name: Turn keypad 19 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_19_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_19_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_20_temp_lock_turn_on:
        friendly_name: Turn keypad 20 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_20_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_20_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_21_temp_lock_turn_on:
        friendly_name: Turn keypad 21 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_21_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_21_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_22_temp_lock_turn_on:
        friendly_name: Turn keypad 22 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_22_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_22_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_23_temp_lock_turn_on:
        friendly_name: Turn keypad 23 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_23_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_23_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_24_temp_lock_turn_on:
        friendly_name: Turn keypad 24 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_24_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_24_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_25_temp_lock_turn_on:
        friendly_name: Turn keypad 25 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_25_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_25_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_26_temp_lock_turn_on:
        friendly_name: Turn keypad 26 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_26_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_26_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_27_temp_lock_turn_on:
        friendly_name: Turn keypad 27 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_27_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_27_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_28_temp_lock_turn_on:
        friendly_name: Turn keypad 28 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_28_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_28_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_29_temp_lock_turn_on:
        friendly_name: Turn keypad 29 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_29_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_29_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_30_temp_lock_turn_on:
        friendly_name: Turn keypad 30 on
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_30_date_start'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_30_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_1_temp_lock_turn_off:
        friendly_name: Turn keypad 1 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_1_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_1_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_2_temp_lock_turn_off:
        friendly_name: Turn keypad 2 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_2_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_2_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_3_temp_lock_turn_off:
        friendly_name: Turn keypad 3 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_3_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_3_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_4_temp_lock_turn_off:
        friendly_name: Turn keypad 4 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_4_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_4_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_5_temp_lock_turn_off:
        friendly_name: Turn keypad 5 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_5_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_5_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_6_temp_lock_turn_off:
        friendly_name: Turn keypad 6 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_6_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_6_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_7_temp_lock_turn_off:
        friendly_name: Turn keypad 7 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_7_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_7_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_8_temp_lock_turn_off:
        friendly_name: Turn keypad 8 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_8_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_8_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_9_temp_lock_turn_off:
        friendly_name: Turn keypad 9 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_9_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_9_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_10_temp_lock_turn_off:
        friendly_name: Turn keypad 10 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_10_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_10_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_11_temp_lock_turn_off:
        friendly_name: Turn keypad 11 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_11_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_11_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_12_temp_lock_turn_off:
        friendly_name: Turn keypad 12 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_12_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_12_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_13_temp_lock_turn_off:
        friendly_name: Turn keypad 13 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_13_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_13_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_14_temp_lock_turn_off:
        friendly_name: Turn keypad 14 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_14_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_14_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_15_temp_lock_turn_off:
        friendly_name: Turn keypad 15 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_15_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_15_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_16_temp_lock_turn_off:
        friendly_name: Turn keypad 16 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_16_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_16_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_17_temp_lock_turn_off:
        friendly_name: Turn keypad 17 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_17_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_17_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_18_temp_lock_turn_off:
        friendly_name: Turn keypad 18 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_18_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_18_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_19_temp_lock_turn_off:
        friendly_name: Turn keypad 19 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_19_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_19_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_20_temp_lock_turn_off:
        friendly_name: Turn keypad 20 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_20_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_20_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_21_temp_lock_turn_off:
        friendly_name: Turn keypad 21 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_21_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_21_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_22_temp_lock_turn_off:
        friendly_name: Turn keypad 22 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_22_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_22_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_23_temp_lock_turn_off:
        friendly_name: Turn keypad 23 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_23_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_23_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_24_temp_lock_turn_off:
        friendly_name: Turn keypad 24 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_24_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_24_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_25_temp_lock_turn_off:
        friendly_name: Turn keypad 25 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_25_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_25_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_26_temp_lock_turn_off:
        friendly_name: Turn keypad 26 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_26_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_26_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_27_temp_lock_turn_off:
        friendly_name: Turn keypad 27 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_27_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_27_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_28_temp_lock_turn_off:
        friendly_name: Turn keypad 28 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_28_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_28_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_29_temp_lock_turn_off:
        friendly_name: Turn keypad 29 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_29_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_29_access_schedule'].state == 'Temporary' and input.state == time_now }}

      keypad_30_temp_lock_turn_off:
        friendly_name: Turn keypad 30 off
        entity_id: sensor.date__time
        value_template: >-
          {% set input = states['input_datetime']['door_keypad_30_date_end'] %}
          {% set time_now = states['sensor']['date__time'].state | replace(',', '') ~ ':00' %}
          {{ states['input_select']['door_keypad_30_access_schedule'].state == 'Temporary' and input.state == time_now }}
